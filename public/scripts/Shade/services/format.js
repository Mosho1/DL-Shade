// Generated by CoffeeScript 1.7.1
(function() {
  angular.module('ShadeApp').service('format', function() {
    var insertions;
    insertions = {
      0: '0'
    };
    return function(input, str) {
      var DelimOpt, appendIndex, appendLeft, i, j, k, output;
      if (angular.isNumber(input)) {
        output = [[], []];
        input = input.toString().split(".").map(function(elm) {
          return elm.split("");
        });
        DelimOpt = /#+,+#+.*\./.test(str);
        str = str.replace(/\s|,/g, '');
        appendIndex = Math.min(str.indexOf("#"), str.indexOf("0"));
        appendLeft = str.slice(0, appendIndex);
        str = str.slice(appendIndex).split(".").map(function(elm) {
          return elm.split("");
        });
        j = -1;
        i = 0;
        while (str[1] && input[1] && i < str[1].length) {
          output[1].push((/[#0]/.test(str[1][i]) ? input[1][++j] || insertions[str[1][i]] : str[1][i] || ""));
          i++;
        }
        j = input[0].length;
        i = str[0].length - 1;
        k = 0;
        while (Math.max(j, i) >= 0) {
          output[0].unshift((i < 0 || /[#0]/.test(str[0][i]) ? input[0][--j] || insertions[str[0][i]] : str[0][i] || ""));
          i--;
        }
        return appendLeft + output[0].join("") + (output[1].length ? "." + output[1].join("") : "");
      }
    };
  });

}).call(this);
